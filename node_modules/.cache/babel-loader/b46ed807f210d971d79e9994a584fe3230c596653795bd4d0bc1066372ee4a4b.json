{"ast":null,"code":"import React,{useState}from\"react\";import supabase from\"./supabase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NewFactForm(_ref){let{setFacts,categories,setShowForm}=_ref;const[text,setText]=useState(\"\");const[source,setSource]=useState(\"\");const[category,setCategory]=useState(\"\");const[isUploading,setIsUploading]=useState(false);const textLength=text.length;async function handleSubmit(e){e.preventDefault();if(text&&source&&category&&textLength<=200){// upload fact to Supabase and receive the new fact object\nsetIsUploading(true);const{data:newFact,error}=await supabase.from(\"facts\").insert([{text,source,category}]).select();setIsUploading(false);if(!error)setFacts(fact=>[newFact[0],...fact]);setShowForm(false);}}return/*#__PURE__*/_jsxs(\"form\",{className:\"fact-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Share a fact with the world...\",value:text,onChange:e=>setText(e.target.value),disabled:isUploading}),/*#__PURE__*/_jsx(\"span\",{children:200-textLength}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"Trustworthy source...\",value:source,onChange:e=>setSource(e.target.value),autoComplete:\"off\",disabled:isUploading}),/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:e=>setCategory(e.target.value),disabled:isUploading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose category:\"}),categories.map(category=>/*#__PURE__*/_jsxs(\"option\",{value:category.name,children:[category.name[0].toUpperCase(),category.name.slice(1)]},category.name))]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-large\",disabled:isUploading,children:\"Post\"})]});}export default NewFactForm;","map":{"version":3,"names":["React","useState","supabase","jsx","_jsx","jsxs","_jsxs","NewFactForm","_ref","setFacts","categories","setShowForm","text","setText","source","setSource","category","setCategory","isUploading","setIsUploading","textLength","length","handleSubmit","e","preventDefault","data","newFact","error","from","insert","select","fact","className","onSubmit","children","type","placeholder","value","onChange","target","disabled","autoComplete","map","name","toUpperCase","slice"],"sources":["/Users/rachelgapasin/Documents/websites/facts-logger/src/NewFactForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport supabase from \"./supabase\";\n\nfunction NewFactForm({ setFacts, categories, setShowForm }) {\n  const [text, setText] = useState(\"\");\n  const [source, setSource] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [isUploading, setIsUploading] = useState(false);\n  const textLength = text.length;\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    if (text && source && category && textLength <= 200) {\n      // upload fact to Supabase and receive the new fact object\n      setIsUploading(true);\n      const { data: newFact, error } = await supabase\n        .from(\"facts\")\n        .insert([{ text, source, category }])\n        .select();\n      setIsUploading(false);\n\n      if (!error) setFacts((fact) => [newFact[0], ...fact]);\n\n      setShowForm(false);\n    }\n  }\n\n  return (\n    <form className=\"fact-form\" onSubmit={handleSubmit}>\n      <input\n        type=\"text\"\n        placeholder=\"Share a fact with the world...\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n        disabled={isUploading}\n      />\n      <span>{200 - textLength}</span>\n      <input\n        type=\"url\"\n        placeholder=\"Trustworthy source...\"\n        value={source}\n        onChange={(e) => setSource(e.target.value)}\n        autoComplete=\"off\"\n        disabled={isUploading}\n      />\n      <select\n        value={category}\n        onChange={(e) => setCategory(e.target.value)}\n        disabled={isUploading}\n      >\n        <option value=\"\">Choose category:</option>\n        {categories.map((category) => (\n          <option key={category.name} value={category.name}>\n            {category.name[0].toUpperCase()}\n            {category.name.slice(1)}\n          </option>\n        ))}\n      </select>\n      <button className=\"btn btn-large\" disabled={isUploading}>\n        Post\n      </button>\n    </form>\n  );\n}\n\nexport default NewFactForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}